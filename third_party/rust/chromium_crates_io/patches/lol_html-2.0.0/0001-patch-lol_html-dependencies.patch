From 302fd3b05336e51ee4fdcc44dcfc4f81a6275612 Mon Sep 17 00:00:00 2001
From: Anton Lazarev <antonok35@gmail.com>
Date: Wed, 6 Nov 2024 15:20:44 -0800
Subject: [PATCH] patch lol_html dependencies

---
 .../lol_html-2.0.0/.cargo_vcs_info.json       |   2 +-
 .../vendor/lol_html-2.0.0/Cargo.lock          | 331 ++++++++++--------
 .../vendor/lol_html-2.0.0/Cargo.toml          |  20 +-
 .../vendor/lol_html-2.0.0/Cargo.toml.orig     |  11 +-
 .../lol_html-2.0.0/src/selectors_vm/ast.rs    |  20 +-
 .../lol_html-2.0.0/src/selectors_vm/error.rs  |  18 +-
 .../lol_html-2.0.0/src/selectors_vm/parser.rs |  42 ++-
 7 files changed, 250 insertions(+), 194 deletions(-)

diff --git a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/.cargo_vcs_info.json b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/.cargo_vcs_info.json
index bc22f8f7e0e..bac49ee5854 100644
--- a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/.cargo_vcs_info.json
+++ b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/.cargo_vcs_info.json
@@ -1,6 +1,6 @@
 {
   "git": {
-    "sha1": "4f8becea13a0021c8b71abd2dcc5899384973b66"
+    "sha1": "4ac5cb9e363eb6813a0d9e475be31dca01a525d5"
   },
   "path_in_vcs": ""
 }
\ No newline at end of file
diff --git a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.lock b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.lock
index 432cbc0225a..bbb4244e357 100644
--- a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.lock
+++ b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.lock
@@ -2,18 +2,6 @@
 # It is not intended for manual editing.
 version = 3
 
-[[package]]
-name = "ahash"
-version = "0.8.11"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "e89da841a80418a9b391ebaea17f5c112ffaaa96f621d2c285b5174da76b9011"
-dependencies = [
- "cfg-if",
- "once_cell",
- "version_check",
- "zerocopy",
-]
-
 [[package]]
 name = "aho-corasick"
 version = "1.1.3"
@@ -30,21 +18,59 @@ source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "4b46cbb362ab8752921c97e041f5e366ee6297bd428a31275b9fcf1e380f7299"
 
 [[package]]
-name = "atty"
-version = "0.2.14"
+name = "anstream"
+version = "0.6.18"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "d9b39be18770d11421cdb1b9947a45dd3f37e93092cbf377614828a319d5fee8"
+checksum = "8acc5369981196006228e28809f761875c0327210a891e941f4c683b3a99529b"
 dependencies = [
- "hermit-abi",
- "libc",
- "winapi 0.3.9",
+ "anstyle",
+ "anstyle-parse",
+ "anstyle-query",
+ "anstyle-wincon",
+ "colorchoice",
+ "is_terminal_polyfill",
+ "utf8parse",
+]
+
+[[package]]
+name = "anstyle"
+version = "1.0.10"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "55cc3b69f167a1ef2e161439aa98aed94e6028e5f9a59be9a6ffb47aef1651f9"
+
+[[package]]
+name = "anstyle-parse"
+version = "0.2.6"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "3b2d16507662817a6a20a9ea92df6652ee4f94f914589377d69f3b21bc5798a9"
+dependencies = [
+ "utf8parse",
+]
+
+[[package]]
+name = "anstyle-query"
+version = "1.1.2"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "79947af37f4177cfead1110013d678905c37501914fba0efea834c3fe9a8d60c"
+dependencies = [
+ "windows-sys 0.59.0",
+]
+
+[[package]]
+name = "anstyle-wincon"
+version = "3.0.6"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "2109dbce0e72be3ec00bed26e6a7479ca384ad226efdd66db8fa2e3a38c83125"
+dependencies = [
+ "anstyle",
+ "windows-sys 0.59.0",
 ]
 
 [[package]]
 name = "autocfg"
-version = "1.3.0"
+version = "1.4.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "0c4b4d0bd25bd0b74681c0ad21497610ce1b7c91b1022cd21c80c6fbdd9476b0"
+checksum = "ace50bade8e6234aa140d9a2f552bbee1db4d353f69b8217bc503490fc1a9f26"
 
 [[package]]
 name = "bitflags"
@@ -111,25 +137,37 @@ dependencies = [
 
 [[package]]
 name = "clap"
-version = "3.2.25"
+version = "4.5.20"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "4ea181bf566f71cb9a5d17a59e1871af638180a18fb0035c92ae62b705207123"
+checksum = "b97f376d85a664d5837dbae44bf546e6477a679ff6610010f17276f686d867e8"
 dependencies = [
- "bitflags 1.3.2",
- "clap_lex",
- "indexmap",
- "textwrap",
+ "clap_builder",
 ]
 
 [[package]]
-name = "clap_lex"
-version = "0.2.4"
+name = "clap_builder"
+version = "4.5.20"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "2850f2f5a82cbf437dd5af4d49848fbdfc27c157c3d010345776f952765261c5"
+checksum = "19bc80abd44e4bed93ca373a0704ccbd1b710dc5749406201bb018272808dc54"
 dependencies = [
- "os_str_bytes",
+ "anstream",
+ "anstyle",
+ "clap_lex",
+ "strsim",
 ]
 
+[[package]]
+name = "clap_lex"
+version = "0.7.2"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "1462739cb27611015575c0c11df5df7601141071f07518d56fcc1be504cbec97"
+
+[[package]]
+name = "colorchoice"
+version = "1.0.3"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "5b63caa9aa9397e2d9480a9b13673856c78d8ac123288526c37d7839f2a86990"
+
 [[package]]
 name = "convert_case"
 version = "0.4.0"
@@ -138,19 +176,19 @@ checksum = "6245d59a3e82a7fc217c5828a6692dbc6dfb63a0c8c90495621f7b9d79704a0e"
 
 [[package]]
 name = "criterion"
-version = "0.4.0"
+version = "0.5.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "e7c76e09c1aae2bc52b3d2f29e13c6572553b30c4aa1b8a49fd70de6412654cb"
+checksum = "f2b12d017a929603d80db1831cd3a24082f8137ce19c69e6447f54f5fc8d692f"
 dependencies = [
  "anes",
- "atty",
  "cast",
  "ciborium",
  "clap",
  "criterion-plot",
+ "is-terminal",
  "itertools",
- "lazy_static",
  "num-traits",
+ "once_cell",
  "oorandom",
  "plotters",
  "rayon",
@@ -205,9 +243,9 @@ checksum = "7a81dae078cea95a014a339291cec439d2f232ebe854a9d672b796c6afafa9b7"
 
 [[package]]
 name = "cssparser"
-version = "0.27.2"
+version = "0.28.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "754b69d351cdc2d8ee09ae203db831e005560fc6030da058f86ad60c92a9cb0a"
+checksum = "1db8599a9761b371751fbf13e076fa03c6e1a78f8c5288e6ab9467f10a2322c1"
 dependencies = [
  "cssparser-macros",
  "dtoa-short",
@@ -227,7 +265,7 @@ source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "13b588ba4ac1a99f7f2964d24b3d896ddc6bf847ee3855dbd4366f058cfcd331"
 dependencies = [
  "quote",
- "syn 2.0.72",
+ "syn 2.0.86",
 ]
 
 [[package]]
@@ -239,8 +277,8 @@ dependencies = [
  "convert_case",
  "proc-macro2",
  "quote",
- "rustc_version 0.4.0",
- "syn 2.0.72",
+ "rustc_version 0.4.1",
+ "syn 2.0.86",
 ]
 
 [[package]]
@@ -266,13 +304,19 @@ checksum = "60b1af1c220855b6ceac025d3f6ecdd2b7c4894bfe9cd9bda4fbb4bc7c0d4cf0"
 
 [[package]]
 name = "encoding_rs"
-version = "0.8.34"
+version = "0.8.35"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "b45de904aa0b010bce2ab45264d0631681847fa7b6f2eaa7dab7619943bc4f59"
+checksum = "75030f3c4f45dafd7586dd6780965a8c7e8e285a5ecb86713e63a79c5b2766f3"
 dependencies = [
  "cfg-if",
 ]
 
+[[package]]
+name = "foldhash"
+version = "0.1.3"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "f81ec6369c545a7d40e4589b5597581fa1c441fe1cce96dd1de43159910a36a2"
+
 [[package]]
 name = "futf"
 version = "0.1.5"
@@ -341,28 +385,19 @@ dependencies = [
 
 [[package]]
 name = "hashbrown"
-version = "0.12.3"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "8a9ee70c43aaf417c914396645a0fa852624801b24ebb7ae78fe8272889ac888"
-
-[[package]]
-name = "hashbrown"
-version = "0.13.2"
+version = "0.15.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "43a3c133739dddd0d2990f9a4bdf8eb4b21ef50e4851ca85ab661199821d510e"
+checksum = "3a9bfc1af68b1726ea47d3d5109de126281def866b33970e10fbab11b5dafab3"
 dependencies = [
- "ahash",
+ "foldhash",
  "serde",
 ]
 
 [[package]]
 name = "hermit-abi"
-version = "0.1.19"
+version = "0.4.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "62b467343b94ba476dcb2500d242dadbb39557df889310ac77c5d99100aaac33"
-dependencies = [
- "libc",
-]
+checksum = "fbf6a919d6cf397374f7dfeeea91d974c7c0a7221d0d0f4f20d859d329e53fcc"
 
 [[package]]
 name = "html5ever"
@@ -379,15 +414,22 @@ dependencies = [
 ]
 
 [[package]]
-name = "indexmap"
-version = "1.9.3"
+name = "is-terminal"
+version = "0.4.13"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "bd070e393353796e801d209ad339e89596eb4c8d430d18ede6a1cced8fafbd99"
+checksum = "261f68e344040fbd0edea105bef17c66edf46f984ddb1115b775ce31be948f4b"
 dependencies = [
- "autocfg",
- "hashbrown 0.12.3",
+ "hermit-abi",
+ "libc",
+ "windows-sys 0.52.0",
 ]
 
+[[package]]
+name = "is_terminal_polyfill"
+version = "1.70.1"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "7943c866cc5cd64cbc25b2e01621d07fa8eb2a1a23160ee81ce38704e97b8ecf"
+
 [[package]]
 name = "itertools"
 version = "0.10.5"
@@ -411,9 +453,9 @@ checksum = "49f1f14873335454500d59611f1cf4a4b0f786f9ac11f4312a78e4cf2566695b"
 
 [[package]]
 name = "js-sys"
-version = "0.3.69"
+version = "0.3.72"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "29c15563dc2726973df627357ce0c9ddddbea194836909d655df6a75d2cf296d"
+checksum = "6a88f1bda2bd75b0452a14784937d796722fdebfe50df998aeb3f0b7603019a9"
 dependencies = [
  "wasm-bindgen",
 ]
@@ -442,9 +484,9 @@ checksum = "830d08ce1d1d941e6b30645f1a0eb5643013d835ce3779a5fc208261dbe10f55"
 
 [[package]]
 name = "libc"
-version = "0.2.155"
+version = "0.2.161"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "97b3888a4aecf77e811145cadf6eef5901f4782c53886191b2f693f24761847c"
+checksum = "8e9489c2807c139ffd9c1794f4af0ebe86a828db53ecdc7fea2111d0fed085d1"
 
 [[package]]
 name = "lock_api"
@@ -468,11 +510,12 @@ version = "2.0.0"
 dependencies = [
  "bitflags 2.6.0",
  "cfg-if",
+ "clap",
  "criterion",
  "cssparser",
  "encoding_rs",
  "glob",
- "hashbrown 0.13.2",
+ "hashbrown",
  "html5ever",
  "itertools",
  "lazy_static",
@@ -563,9 +606,9 @@ dependencies = [
 
 [[package]]
 name = "once_cell"
-version = "1.19.0"
+version = "1.20.2"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "3fdb12b2476b595f9358c5161aa467c2438859caa136dec86c26fdd2efe17b92"
+checksum = "1261fe7e33c73b354eab43b1273a57c8f967d0391e80353e51f764ac02cf6775"
 
 [[package]]
 name = "oorandom"
@@ -573,12 +616,6 @@ version = "11.1.4"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "b410bbe7e14ab526a0e86877eb47c6996a2bd7746f027ba551028c925390e4e9"
 
-[[package]]
-name = "os_str_bytes"
-version = "6.6.1"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "e2355d85b9a3786f481747ced0e0ff2ba35213a1f9bd406ed906554d7af805a1"
-
 [[package]]
 name = "parking_lot"
 version = "0.12.3"
@@ -696,9 +733,9 @@ dependencies = [
 
 [[package]]
 name = "plotters"
-version = "0.3.6"
+version = "0.3.7"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "a15b6eccb8484002195a3e44fe65a4ce8e93a625797a063735536fd59cb01cf3"
+checksum = "5aeb6f403d7a4911efb1e33402027fc44f29b5bf6def3effcc22d7bb75f2b747"
 dependencies = [
  "num-traits",
  "plotters-backend",
@@ -709,15 +746,15 @@ dependencies = [
 
 [[package]]
 name = "plotters-backend"
-version = "0.3.6"
+version = "0.3.7"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "414cec62c6634ae900ea1c56128dfe87cf63e7caece0852ec76aba307cebadb7"
+checksum = "df42e13c12958a16b3f7f4386b9ab1f3e7933914ecea48da7139435263a4172a"
 
 [[package]]
 name = "plotters-svg"
-version = "0.3.6"
+version = "0.3.7"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "81b30686a7d9c3e010b84284bdd26a29f2138574f52f5eb6f794fc0ad924e705"
+checksum = "51bae2ac328883f7acdfea3d66a7c35751187f870bc81f94563733a154d7a670"
 dependencies = [
  "plotters-backend",
 ]
@@ -745,18 +782,18 @@ checksum = "dc375e1527247fe1a97d8b7156678dfe7c1af2fc075c9a4db3690ecd2a148068"
 
 [[package]]
 name = "proc-macro2"
-version = "1.0.86"
+version = "1.0.89"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "5e719e8df665df0d1c8fbfd238015744736151d4445ec0836b8e628aae103b77"
+checksum = "f139b0662de085916d1fb67d2b4169d1addddda1919e696f3252b740b629986e"
 dependencies = [
  "unicode-ident",
 ]
 
 [[package]]
 name = "quote"
-version = "1.0.36"
+version = "1.0.37"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "0fa76aaf39101c457836aec0ce2316dbdc3ab723cdda1c6bd4e6ad4208acaca7"
+checksum = "b5b9d34b8991d19d98081b46eacdd8eb58c6f2b201139f7c5f643cc155a633af"
 dependencies = [
  "proc-macro2",
 ]
@@ -864,18 +901,18 @@ dependencies = [
 
 [[package]]
 name = "redox_syscall"
-version = "0.5.3"
+version = "0.5.7"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "2a908a6e00f1fdd0dfd9c0eb08ce85126f6d8bbda50017e74bc4a4b7d4a926a4"
+checksum = "9b6dfecf2c74bce2466cabf93f6664d6998a69eb21e39f4207930065b27b771f"
 dependencies = [
  "bitflags 2.6.0",
 ]
 
 [[package]]
 name = "regex"
-version = "1.10.6"
+version = "1.11.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "4219d74c6b67a3654a9fbebc4b419e22126d13d2f3c4a07ee0cb61ff79a79619"
+checksum = "b544ef1b4eac5dc2db33ea63606ae9ffcfac26c1416a2806ae0bf5f56b201191"
 dependencies = [
  "aho-corasick",
  "memchr",
@@ -885,9 +922,9 @@ dependencies = [
 
 [[package]]
 name = "regex-automata"
-version = "0.4.7"
+version = "0.4.8"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "38caf58cc5ef2fed281f89292ef23f6365465ed9a41b7a7754eb4e26496c92df"
+checksum = "368758f23274712b504848e9d5a6f010445cc8b87a7cdb4d7cbee666c1288da3"
 dependencies = [
  "aho-corasick",
  "memchr",
@@ -896,9 +933,9 @@ dependencies = [
 
 [[package]]
 name = "regex-syntax"
-version = "0.8.4"
+version = "0.8.5"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "7a66a03ae7c801facd77a29370b4faec201768915ac14a721ba36f20bc9c209b"
+checksum = "2b15c43186be67a4fd63bee50d0303afffcef381492ebe2c5d87f324e1b8815c"
 
 [[package]]
 name = "rustc-serialize"
@@ -931,9 +968,9 @@ dependencies = [
 
 [[package]]
 name = "rustc_version"
-version = "0.4.0"
+version = "0.4.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "bfa0f585226d2e68097d4f95d113b15b83a82e819ab25717ec0590d9584ef366"
+checksum = "cfcb3a22ef46e85b45de6ee7e79d063319ebb6594faafcf1c225ea92ab6e9b92"
 dependencies = [
  "semver 1.0.23",
 ]
@@ -961,22 +998,20 @@ checksum = "94143f37725109f92c262ed2cf5e59bce7498c01bcc1502d7b9afe439a4e9f49"
 
 [[package]]
 name = "selectors"
-version = "0.22.0"
+version = "0.23.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "df320f1889ac4ba6bc0cdc9c9af7af4bd64bb927bccdf32d81140dc1f9be12fe"
+checksum = "fdea87c686be721aab36607728047801ee21561bfdbd6bf0da7ace2536d5879f"
 dependencies = [
  "bitflags 1.3.2",
  "cssparser",
  "derive_more",
  "fxhash",
  "log",
- "matches",
  "phf 0.8.0",
  "phf_codegen 0.8.0",
  "precomputed-hash",
  "servo_arc",
  "smallvec",
- "thin-slice",
 ]
 
 [[package]]
@@ -1002,29 +1037,29 @@ checksum = "388a1df253eca08550bef6c72392cfe7c30914bf41df5269b68cbd6ff8f570a3"
 
 [[package]]
 name = "serde"
-version = "1.0.204"
+version = "1.0.214"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "bc76f558e0cbb2a839d37354c575f1dc3fdc6546b5be373ba43d95f231bf7c12"
+checksum = "f55c3193aca71c12ad7890f1785d2b73e1b9f63a0bbc353c08ef26fe03fc56b5"
 dependencies = [
  "serde_derive",
 ]
 
 [[package]]
 name = "serde_derive"
-version = "1.0.204"
+version = "1.0.214"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "e0cd7e117be63d3c3678776753929474f3b04a43a080c744d6b0ae2a8c28e222"
+checksum = "de523f781f095e28fa605cdce0f8307e451cc0fd14e2eb4cd2e98a355b147766"
 dependencies = [
  "proc-macro2",
  "quote",
- "syn 2.0.72",
+ "syn 2.0.86",
 ]
 
 [[package]]
 name = "serde_json"
-version = "1.0.122"
+version = "1.0.132"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "784b6203951c57ff748476b126ccb5e8e2959a5c19e5c617ab1956be3dbc68da"
+checksum = "d726bfaff4b320266d395898905d0eba0345aae23b54aee3a737e260fd46db03"
 dependencies = [
  "itoa 1.0.11",
  "memchr",
@@ -1092,6 +1127,12 @@ dependencies = [
  "quote",
 ]
 
+[[package]]
+name = "strsim"
+version = "0.11.1"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "7da8b5736845d9f2fcb837ea5d9e2628564b3b043a70948a3f0b778838c5fb4f"
+
 [[package]]
 name = "syn"
 version = "1.0.109"
@@ -1105,9 +1146,9 @@ dependencies = [
 
 [[package]]
 name = "syn"
-version = "2.0.72"
+version = "2.0.86"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "dc4b9b9bf2add8093d3f2c0204471e951b2285580335de42f9d2534f3ae7a8af"
+checksum = "e89275301d38033efb81a6e60e3497e734dfcc62571f2854bf4b16690398824c"
 dependencies = [
  "proc-macro2",
  "quote",
@@ -1135,36 +1176,24 @@ dependencies = [
  "winapi 0.2.8",
 ]
 
-[[package]]
-name = "textwrap"
-version = "0.16.1"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "23d434d3f8967a09480fb04132ebe0a3e088c173e6d0ee7897abbdf4eab0f8b9"
-
-[[package]]
-name = "thin-slice"
-version = "0.1.1"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "8eaa81235c7058867fa8c0e7314f33dcce9c215f535d1913822a2b3f5e289f3c"
-
 [[package]]
 name = "thiserror"
-version = "1.0.63"
+version = "1.0.66"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "c0342370b38b6a11b6cc11d6a805569958d54cfa061a29969c3b5ce2ea405724"
+checksum = "5d171f59dbaa811dbbb1aee1e73db92ec2b122911a48e1390dfe327a821ddede"
 dependencies = [
  "thiserror-impl",
 ]
 
 [[package]]
 name = "thiserror-impl"
-version = "1.0.63"
+version = "1.0.66"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "a4558b58466b9ad7ca0f102865eccc95938dca1a74a856f2b57b6629050da261"
+checksum = "b08be0f17bd307950653ce45db00cd31200d82b624b36e181337d9c7d92765b5"
 dependencies = [
  "proc-macro2",
  "quote",
- "syn 2.0.72",
+ "syn 2.0.86",
 ]
 
 [[package]]
@@ -1190,15 +1219,15 @@ dependencies = [
 
 [[package]]
 name = "unicode-ident"
-version = "1.0.12"
+version = "1.0.13"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "3354b9ac3fae1ff6755cb6db53683adb661634f67557942dea4facebec0fee4b"
+checksum = "e91b56cd4cadaeb79bbf1a5645f6b4f8dc5bde8834ad5894a8db35fda9efa1fe"
 
 [[package]]
 name = "unicode-width"
-version = "0.1.13"
+version = "0.1.14"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "0336d538f7abc86d282a4189614dfaa90810dfc2c6f6427eaf88e16311dd225d"
+checksum = "7dd6e30e90baa6f72411720665d41d89b9a3d039dc45b8faea1ddd07f617f6af"
 
 [[package]]
 name = "utf-8"
@@ -1207,10 +1236,10 @@ source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "09cc8ee72d2a9becf2f2febe0205bbed8fc6615b7cb429ad062dc7b7ddd036a9"
 
 [[package]]
-name = "version_check"
-version = "0.9.5"
+name = "utf8parse"
+version = "0.2.2"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "0b928f33d975fc6ad9f86c8f283853ad26bdd5b10b7f1542aa2fa15e2289105a"
+checksum = "06abde3611657adf66d383f00b093d7faecc7fa57071cce2578660c9f1010821"
 
 [[package]]
 name = "walkdir"
@@ -1242,34 +1271,35 @@ checksum = "9c8d87e72b64a3b4db28d11ce29237c246188f4f51057d65a7eab63b7987e423"
 
 [[package]]
 name = "wasm-bindgen"
-version = "0.2.92"
+version = "0.2.95"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "4be2531df63900aeb2bca0daaaddec08491ee64ceecbee5076636a3b026795a8"
+checksum = "128d1e363af62632b8eb57219c8fd7877144af57558fb2ef0368d0087bddeb2e"
 dependencies = [
  "cfg-if",
+ "once_cell",
  "wasm-bindgen-macro",
 ]
 
 [[package]]
 name = "wasm-bindgen-backend"
-version = "0.2.92"
+version = "0.2.95"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "614d787b966d3989fa7bb98a654e369c762374fd3213d212cfc0251257e747da"
+checksum = "cb6dd4d3ca0ddffd1dd1c9c04f94b868c37ff5fac97c30b97cff2d74fce3a358"
 dependencies = [
  "bumpalo",
  "log",
  "once_cell",
  "proc-macro2",
  "quote",
- "syn 2.0.72",
+ "syn 2.0.86",
  "wasm-bindgen-shared",
 ]
 
 [[package]]
 name = "wasm-bindgen-macro"
-version = "0.2.92"
+version = "0.2.95"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "a1f8823de937b71b9460c0c34e25f3da88250760bec0ebac694b49997550d726"
+checksum = "e79384be7f8f5a9dd5d7167216f022090cf1f9ec128e6e6a482a2cb5c5422c56"
 dependencies = [
  "quote",
  "wasm-bindgen-macro-support",
@@ -1277,28 +1307,28 @@ dependencies = [
 
 [[package]]
 name = "wasm-bindgen-macro-support"
-version = "0.2.92"
+version = "0.2.95"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "e94f17b526d0a461a191c78ea52bbce64071ed5c04c9ffe424dcb38f74171bb7"
+checksum = "26c6ab57572f7a24a4985830b120de1594465e5d500f24afe89e16b4e833ef68"
 dependencies = [
  "proc-macro2",
  "quote",
- "syn 2.0.72",
+ "syn 2.0.86",
  "wasm-bindgen-backend",
  "wasm-bindgen-shared",
 ]
 
 [[package]]
 name = "wasm-bindgen-shared"
-version = "0.2.92"
+version = "0.2.95"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "af190c94f2773fdb3729c55b007a722abb5384da03bc0986df4c289bf5567e96"
+checksum = "65fc09f10666a9f147042251e0dda9c18f166ff7de300607007e96bdebc1068d"
 
 [[package]]
 name = "web-sys"
-version = "0.3.69"
+version = "0.3.72"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "77afa9a11836342370f4817622a2f0f418b134426d91a82dfb48f532d2ec13ef"
+checksum = "f6488b90108c040df0fe62fa815cbdee25124641df01814dd7282749234c6112"
 dependencies = [
  "js-sys",
  "wasm-bindgen",
@@ -1338,7 +1368,7 @@ version = "0.1.9"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "cf221c93e13a30d793f7645a0e7762c55d169dbb0a49671918a2319d289b10bb"
 dependencies = [
- "windows-sys",
+ "windows-sys 0.59.0",
 ]
 
 [[package]]
@@ -1347,6 +1377,15 @@ version = "0.4.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "712e227841d057c1ee1cd2fb22fa7e5a5461ae8e48fa2ca79ec42cfc1931183f"
 
+[[package]]
+name = "windows-sys"
+version = "0.52.0"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "282be5f36a8ce781fad8c8ae18fa3f9beff57ec1b52cb3de0789201425d9a33d"
+dependencies = [
+ "windows-targets",
+]
+
 [[package]]
 name = "windows-sys"
 version = "0.59.0"
@@ -1449,5 +1488,5 @@ checksum = "fa4f8080344d4671fb4e831a13ad1e68092748387dfc4f55e356242fae12ce3e"
 dependencies = [
  "proc-macro2",
  "quote",
- "syn 2.0.72",
+ "syn 2.0.86",
 ]
diff --git a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.toml b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.toml
index d94cc264a13..6a36d5fb2c6 100644
--- a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.toml
+++ b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.toml
@@ -67,13 +67,18 @@ version = "2.0.0"
 version = "1.0.0"
 
 [dependencies.cssparser]
-version = "0.27.2"
+version = "0.28.1"
 
 [dependencies.encoding_rs]
 version = "0.8.13"
 
 [dependencies.hashbrown]
-version = "0.13.1"
+version = "0.15.0"
+features = [
+    "default-hasher",
+    "raw-entry",
+]
+default-features = false
 
 [dependencies.lazy_static]
 version = "1.3.0"
@@ -88,20 +93,25 @@ version = "2.1.2"
 version = "0.3.16"
 
 [dependencies.selectors]
-version = "0.22.0"
+version = "0.23.0"
 
 [dependencies.thiserror]
 version = "1.0.2"
 
+[dev-dependencies.clap]
+version = "*"
+features = ["help"]
+
 [dev-dependencies.criterion]
-version = "0.4.0"
+version = "0.5.1"
 
 [dev-dependencies.glob]
 version = "0.3.0"
 
 [dev-dependencies.hashbrown]
-version = "0.13.1"
+version = "0.15.0"
 features = ["serde"]
+default-features = false
 
 [dev-dependencies.html5ever]
 version = "0.26.0"
diff --git a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.toml.orig b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.toml.orig
index 4c4b5607838..25f820f2ce7 100644
--- a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.toml.orig
+++ b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/Cargo.toml.orig
@@ -41,22 +41,23 @@ name = "bench"
 [dependencies]
 bitflags = "2.0.0"
 cfg-if = "1.0.0"
-cssparser = "0.27.2"
+cssparser = "0.28.1"
 encoding_rs = "0.8.13"
 lazycell = "1.3.0"
 lazy_static = "1.3.0"
 memchr = "2.1.2"
-selectors = "0.22.0"
+selectors = "0.23.0"
 thiserror = "1.0.2"
-hashbrown = "0.13.1"
+hashbrown = { version = "0.15.0", default-features = false, features = ["default-hasher", "raw-entry"] }
 mime = "0.3.16"
 
 [dev-dependencies]
-criterion = "0.4.0"
+criterion = "0.5.1"
+clap = { version = "*", features = ["help"] } # for criterion <= v0.5.1
 glob = "0.3.0"
 html5ever = "0.26.0"
 markup5ever_rcdom = "0.2.0"
-hashbrown = { version = "0.13.1", features = ["serde"] }
+hashbrown = { version = "0.15.0", default-features = false, features = ["serde"] }
 serde = "1.0.126"
 serde_derive = "1.0.19"
 serde_json = "1.0.65"
diff --git a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/ast.rs b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/ast.rs
index 2e0448bc1ff..c149737e20b 100644
--- a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/ast.rs
+++ b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/ast.rs
@@ -119,16 +119,16 @@ impl From<&Component<SelectorImplDescriptor>> for Condition {
     fn from(component: &Component<SelectorImplDescriptor>) -> Self {
         match component {
             Component::LocalName(n) => {
-                Condition::OnTagName(OnTagNameExpr::LocalName(n.name.to_owned()))
+                Condition::OnTagName(OnTagNameExpr::LocalName(n.name.0.to_owned()))
             }
             Component::ExplicitUniversalType | Component::ExplicitAnyNamespace => {
                 Condition::OnTagName(OnTagNameExpr::ExplicitAny)
             }
             Component::ExplicitNoNamespace => Condition::OnTagName(OnTagNameExpr::Unmatchable),
-            Component::ID(id) => Condition::OnAttributes(OnAttributesExpr::Id(id.to_owned())),
-            Component::Class(c) => Condition::OnAttributes(OnAttributesExpr::Class(c.to_owned())),
+            Component::ID(id) => Condition::OnAttributes(OnAttributesExpr::Id(id.0.to_owned())),
+            Component::Class(c) => Condition::OnAttributes(OnAttributesExpr::Class(c.0.to_owned())),
             Component::AttributeInNoNamespaceExists { local_name, .. } => {
-                Condition::OnAttributes(OnAttributesExpr::AttributeExists(local_name.to_owned()))
+                Condition::OnAttributes(OnAttributesExpr::AttributeExists(local_name.0.to_owned()))
             }
             &Component::AttributeInNoNamespace {
                 ref local_name,
@@ -142,8 +142,8 @@ impl From<&Component<SelectorImplDescriptor>> for Condition {
                 } else {
                     Condition::OnAttributes(OnAttributesExpr::AttributeComparisonExpr(
                         AttributeComparisonExpr::new(
-                            local_name.to_owned(),
-                            value.to_owned(),
+                            local_name.0.to_owned(),
+                            value.0.to_owned(),
                             case_sensitivity,
                             operator,
                         ),
@@ -306,8 +306,9 @@ where
                             "Unsupported selector components should be filtered out by the parser."
                         ),
                     },
-                    Component::Negation(c) => {
-                        c.iter().for_each(|c| predicate.add_component(c, true))
+                    Component::Negation(ss) => {
+                        ss.iter()
+                            .for_each(|s| s.iter().for_each(|c| predicate.add_component(c, true)))
                     }
                     _ => predicate.add_component(component, false),
                 }
@@ -824,10 +825,9 @@ mod tests {
             r#"div[foo~"bar"]"#,
             SelectorError::UnexpectedTokenInAttribute,
         );
-        assert_err(":not(:not(p))", SelectorError::NestedNegation);
         assert_err("svg|img", SelectorError::NamespacedSelector);
         assert_err(".foo()", SelectorError::InvalidClassName);
-        assert_err(":not()", SelectorError::EmptyNegation);
+        assert_err(":not()", SelectorError::EmptySelector);
         assert_err("div + span", SelectorError::UnsupportedCombinator('+'));
         assert_err("div ~ span", SelectorError::UnsupportedCombinator('~'));
     }
diff --git a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/error.rs b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/error.rs
index e2e2c8fb56f..8c275221d27 100644
--- a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/error.rs
+++ b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/error.rs
@@ -45,10 +45,6 @@ pub enum SelectorError {
     #[error("Invalid or unescaped class name in selector.")]
     InvalidClassName,
 
-    /// An empty negation in the selector.
-    #[error("Empty negation in selector.")]
-    EmptyNegation,
-
     /// Unsupported combinator in the selector.
     #[error("Unsupported combinator `{0}` in selector.")]
     UnsupportedCombinator(char),
@@ -79,7 +75,7 @@ impl From<SelectorParseError<'_>> for SelectorError {
                 SelectorParseErrorKind::EmptySelector => SelectorError::EmptySelector,
                 SelectorParseErrorKind::DanglingCombinator => SelectorError::DanglingCombinator,
                 SelectorParseErrorKind::UnsupportedPseudoClassOrElement(_)
-                | SelectorParseErrorKind::PseudoElementInComplexSelector
+                | SelectorParseErrorKind::InvalidPseudoElementInsideWhere
                 | SelectorParseErrorKind::NonPseudoElementAfterSlotted
                 | SelectorParseErrorKind::InvalidPseudoElementAfterSlotted
                 | SelectorParseErrorKind::PseudoElementExpectedColon(_)
@@ -87,15 +83,12 @@ impl From<SelectorParseError<'_>> for SelectorError {
                 | SelectorParseErrorKind::NoIdentForPseudo(_)
                 // NOTE: according to the parser code this error occures only during
                 // the parsing of vendor-specific pseudo-classes.
-                | SelectorParseErrorKind::NonCompoundSelector
-                // NOTE: according to the parser code this error occures only during
-                // the parsing of the :slotted() pseudo-class.
-                | SelectorParseErrorKind::NonSimpleSelectorInNegation => {
+                | SelectorParseErrorKind::NonCompoundSelector => {
                     SelectorError::UnsupportedPseudoClassOrElement
                 }
-                // NOTE: this is currently the only case in the parser code
-                // that triggers this error.
-                SelectorParseErrorKind::UnexpectedIdent(_) => SelectorError::NestedNegation,
+                // NOTE: there are currently no cases in the parser code
+                // that trigger this error.
+                SelectorParseErrorKind::UnexpectedIdent(_) => unreachable!(),
                 SelectorParseErrorKind::ExpectedNamespace(_) => SelectorError::NamespacedSelector,
                 SelectorParseErrorKind::ExplicitNamespaceUnexpectedToken(_) => {
                     SelectorError::UnexpectedToken
@@ -107,7 +100,6 @@ impl From<SelectorParseError<'_>> for SelectorError {
                     SelectorError::UnexpectedTokenInAttribute
                 }
                 SelectorParseErrorKind::ClassNeedsIdent(_) => SelectorError::InvalidClassName,
-                SelectorParseErrorKind::EmptyNegation => SelectorError::EmptyNegation,
                 SelectorParseErrorKind::InvalidState => panic!("invalid state"),
             },
         }
diff --git a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/parser.rs b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/parser.rs
index ed8b0cbd5d1..9b417508a52 100644
--- a/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/parser.rs
+++ b/third_party/rust/chromium_crates_io/vendor/lol_html-2.0.0/src/selectors_vm/parser.rs
@@ -11,16 +11,32 @@ use std::str::FromStr;
 #[derive(Debug, Clone, Eq, PartialEq)]
 pub struct SelectorImplDescriptor;
 
+#[derive(Clone, Default, Eq, PartialEq)]
+pub struct CssString(pub String);
+
+impl<'a> From<&'a str> for CssString {
+    fn from(value: &'a str) -> Self {
+        Self(value.to_string())
+    }
+}
+
+impl ToCss for CssString {
+    fn to_css<W>(&self, dest: &mut W) -> fmt::Result
+    where
+        W: fmt::Write,
+    {
+        write!(dest, "{}", self.0)
+    }
+}
+
 impl SelectorImpl for SelectorImplDescriptor {
-    type AttrValue = String;
-    type Identifier = String;
-    type ClassName = String;
-    type PartName = String;
-    type LocalName = String;
-    type NamespacePrefix = String;
+    type AttrValue = CssString;
+    type Identifier = CssString;
+    type LocalName = CssString;
+    type NamespacePrefix = CssString;
     type NamespaceUrl = Namespace;
     type BorrowedNamespaceUrl = Namespace;
-    type BorrowedLocalName = String;
+    type BorrowedLocalName = CssString;
 
     type NonTSPseudoClass = NonTSPseudoClassStub;
     type PseudoElement = PseudoElementStub;
@@ -54,10 +70,6 @@ impl NonTSPseudoClass for NonTSPseudoClassStub {
     fn is_user_action_state(&self) -> bool {
         match *self {}
     }
-
-    fn has_zero_specificity(&self) -> bool {
-        match *self {}
-    }
 }
 
 impl ToCss for NonTSPseudoClassStub {
@@ -105,14 +117,15 @@ impl SelectorsParser {
             | Component::AttributeInNoNamespaceExists { .. }
             | Component::AttributeInNoNamespace { .. } => Ok(()),
 
-            Component::Negation(components) => {
-                components.iter().try_for_each(Self::validate_component)
-            }
+            Component::Negation(selectors) => selectors
+                .iter()
+                .try_for_each(|s| s.iter().try_for_each(Self::validate_component)),
 
             // Unsupported
             Component::Empty
             | Component::Part(_)
             | Component::Host(_)
+            | Component::Is(_)
             | Component::LastChild
             | Component::LastOfType
             | Component::NthLastChild(_, _)
@@ -121,6 +134,7 @@ impl SelectorsParser {
             | Component::OnlyOfType
             | Component::Root
             | Component::Scope
+            | Component::Where(_)
             | Component::PseudoElement(_)
             | Component::NonTSPseudoClass(_)
             | Component::Slotted(_) => Err(SelectorError::UnsupportedPseudoClassOrElement),
-- 
2.47.0

